fuzzy_history() {
    history | awk '{for (i=2; i<NF; i++) printf $i " "; print $NF}' | fzf
}

# determine if shell is pseudoterminal
is_pseudoterminal() {
    ls -l /proc/$$/fd | grep pts > /dev/null
}

prompt_command() {
    echo -ne "\033]0;$(whoami)@$(hostname):$(pwd) ${prompt}\007"
}

prompts=(🍏 🍎 🍐 🍊 🍋 🍌 🍉 🍇 🍓 🫐 🍈 🍒 🥭 🍍 🥥 🥝 🍅 🍆 🥑 🥦 🥬 🥒 🫑 🌽 🥕 🫒 🧄)

if is_pseudoterminal
then
    size=${#prompts[@]}
    index=$(($RANDOM % $size))
    prompt=${prompts[$index]}
    PROMPT_COMMAND='prompt_command'
    PS1="${prompt} "
fi

eval "$(direnv hook bash)"
